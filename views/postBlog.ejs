<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post New Blog</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/styles/post.css" rel="stylesheet">
</head>
<body>

<div class="container mt-5">
    <h1 class="text-center mb-4">Post a New Blog</h1>
    <form action="/postBlog" method="post" enctype="multipart/form-data">
        <!-- Image Upload and Preview -->
        <div class="mb-3 d-flex flex-column align-items-center">
            <label for="blogImage" class="form-label">Upload Image</label>
            <div id="imagePreviewContainer" class="mb-3">
                <input type="file" class="form-control" id="blogImage" name="image" accept="image/*" style="display: none;" onchange="previewImage(event)">
            </div>
            <label for="blogImage" class="btn btn-outline-secondary">
                <i class="fas fa-camera"></i> Upload Image
            </label>
            <input type="file" class="form-control" id="blogImage" accept="image/*" style="display: none;" onchange="previewImage(event)">
            <img id="imagePreview" src="" alt="Image preview" style="display: none; max-width: 100%; margin-top: 10px;">
        </div>

        <!-- Title -->
        <div class="mb-3">
            <label for="blogTitle" class="form-label">Blog Title</label>
            <input type="text" name="title" class="form-control" id="blogTitle" placeholder="Enter the blog title">
        </div>

        <% if (category) { %>
        <div class="mb-3">
            <label for="blogCategory" class="form-label">Category</label>
            <select class="form-select" id="blogCategory" name="category">
                <% category.forEach(category => { %>
                <option value="<%= category.category %>"><%= category.category %></option>
                <% }) %>
            </select>
        </div>
        <% } %>

        <!-- Content -->
        <div class="mb-3">
            <label for="blogContent" class="form-label">Content</label>
            <textarea class="form-control" id="blogContent" rows="6" name="content" placeholder="Write your blog content here..."></textarea>
        </div>

        <!-- Author -->
        <div class="mb-3">
            <label for="blogAuthor" class="form-label">Author</label>
            <input type="text" name="author" class="form-control" id="blogAuthor" placeholder="Enter your name">
        </div>

        <!-- Submit Button -->
        <div class="d-grid">
            <button type="submit" class="btn btn-primary">Post Blog</button>
        </div>
    </form>
</div>

<script>
    function previewImage(event) {
        const output = document.getElementById('imagePreview');
        output.src = URL.createObjectURL(event.target.files[0]);
        output.style.display = 'block';
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
